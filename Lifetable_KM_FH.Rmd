---
title: "Lifetable, KM, FH"
author: "Hening Cui"
date: "11/27/2022"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r echo = FALSE, message = FALSE, warning = FALSE}
library(survival)
library(tidyverse)
library(ggplot2)
library(ggfortify)
library(bshazard)
library(survminer)
library(biostat3)
```
## Lifetable



```{r echo = FALSE, message = FALSE, warning = FALSE}
lifetable=lifetab2(Surv(time, status==2) ~ 1, lung, breaks = seq(0, 1200, by = 100))
print(lifetable)
```
## KM and FH 
```{r echo = FALSE, message = FALSE, warning = FALSE}
lung.fit <- lung%>%
  survfit(Surv(time, status==2) ~ sex, data = .)

lung.fit2 <- lung %>%
  survfit(Surv(time, status==2) ~ sex, data = ., type = "fleming-harrington")

splots <- list()

splots[[1]] <- ggsurvplot(lung.fit, data = lung, pval = TRUE, title = "Kaplan-Meier")
splots[[2]] <- ggsurvplot(lung.fit2, data = lung, pval = TRUE, title = "Fleming-Harrington")

arrange_ggsurvplots(splots, print = TRUE,
  ncol = 2, nrow = 1)
```

